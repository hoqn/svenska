---
title: í•™í”Œ(Web)
icon: ğŸ«
start_date: 2024. 04.
stacks:
  - TypeScript
  - React
  - Next.js
  - Framer Motion
links:
  ì„œë¹„ìŠ¤: "https://hakpl.vercel.app"
  ì†ŒìŠ¤ì½”ë“œ: "https://github.com/hoqn/hakpl"
---

> [!warning] ì£¼ì˜
>
> ì•„ì§ ì‘ì„± ì¤‘ì¸ ê¸€ì´ì—ìš”

## ìì—°ìŠ¤ëŸ¬ìš´ ì „í™˜ íš¨ê³¼ êµ¬í˜„

ì´ë²ˆ í”„ë¡œì íŠ¸ì˜ ì£¼ìš” ëª©í‘œ ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„ì´ì—ˆë‹¤. `framer-motion`ì„ í™œìš©í•´ë³¸ ì ì€ ìˆì§€ë§Œ, ë” ë³¸ê²©ì ìœ¼ë¡œ í™œìš©í•´ë³´ê³  ì‹¶ì—ˆë‹¤. ë§ì€ ì˜ê°ì„ ì¤€ ê²ƒì´ ë°”ë¡œ [Emil Kowalski](https://emilkowal.ski) ë‹˜ì˜ ê²°ê³¼ë¬¼ë“¤ì´ì—ˆë‹¤.

ë¨¼ì €, Emil Kowalski ë‹˜ì˜ [vaul](https://vaul.emilkowal.ski/) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ë³´ì•˜ë‹¤. ë§ˆì¹˜ ëª¨ë°”ì¼ ë„¤ì´í‹°ë¸Œ ê°™ì€ ë“œë¡œì–´ë¥¼ ë¦¬ì•¡íŠ¸ ìƒì—ì„œ êµ¬í˜„í•œ ë©‹ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤. í•™êµë¥¼ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì— ì ìš©í•˜ì˜€ëŠ”ë°, ë‹¤ìŒê³¼ ê°™ì´ í•™êµ ì„¤ì •ì„ ìœ„í•œ ë©”ë‰´ë¥¼ íŠ€ì–´ë‚˜ì˜¤ë„ë¡ í–ˆë‹¤.

![](./hakpl/1-1.gif)

ì—¬ê¸°ê¹Œì§„ ê·¸ëƒ¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ í™œìš©í•œ ìˆ˜ì¤€ì´ì—ˆë‹¤. ë¬¸ì œëŠ” ê·¸ ë‹¤ìŒì´ì—ˆë‹¤. í•™êµ ì„¤ì •ì„ ìœ„í•´ í•™êµë¥¼ ê²€ìƒ‰í•˜ê³  ì„ íƒí•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ íŠ¸ëœì§€ì…˜ì´ ë°œìƒí–ˆìŒ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì— ì´ë¦¬ì €ë¦¬ ì—°êµ¬í•´ë³´ì•˜ë‹¤.

ì¼ë‹¨, ì²˜ìŒì—” framer motionì—ì„œ `layout` ì• íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•  ìˆ˜ ìˆì„ ê±°ë¼ ìƒê°í–ˆë‹¤. í•˜ì§€ë§Œ ì•½ê°„ì˜ ë¬¸ì œê°€ ìˆì—ˆëŠ”ë°, ë°”ë¡œ ë¼ìš°íŒ…ì´ ì¼ì–´ë‚˜ëŠ” ì‹œì ì´ì—ˆë‹¤.

ë“œë¡œì–´ ì°½(ëª¨ë‹¬)ì´ í™•ëŒ€ë˜ë©° ë‹¤ìŒ í˜ì´ì§€ë¡œ ì—°ê²°ë˜ë ¤ë©´, ì™„ì „íˆ íŠ¸ëœì§€ì…˜ì´ ëë‚  ë•Œê¹Œì§€ ë’·ë°°ê²½ë„ ìœ ì§€ë˜ì–´ì•¼ í–ˆë‹¤. í•˜ì§€ë§Œ ê·¸ëƒ¥ ë‹¨ìˆœíˆ ë¼ìš°íŒ…ì„ ì‘ë™ì‹œí‚¤ë©´ ë’·ë°°ê²½ì€ ë°”ë¡œ ì‚¬ë¼ì§€ê²Œ ë˜ì–´ íŠ¸ëœì§€ì…˜ì´ ìƒë‹¹íˆ ë¶€ìì—°ìŠ¤ëŸ¬ì›Œì§„ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ? ë‚˜ëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ì˜ ê°€ëŠ¥ì„±ì„ ìƒê°í•´ë³´ì•˜ë‹¤.

1. ê¸°ì¡´ í˜ì´ì§€ì—ì„œ (ê°€ì§œ) í™”ë©´ìœ¼ë¡œ í™•ì¥í•œ ë’¤ ë¼ìš°íŒ…ì„ ìš”ì²­í•œë‹¤.
2. ìƒˆë¡œìš´ í˜ì´ì§€ì—ë„ (ê°€ì§œë¡œ) ë’·ë°°ê²½ì„ ë§Œë“¤ì–´ì¤€ë‹¤.

ë‘ ê°€ì§€ë¥¼ ëª¨ë‘ êµ¬í˜„í•´ë³´ì•˜ê³ , 2ë²ˆ ë°©ë²•ì˜ ê²½ìš° ìƒˆë¡œìš´ í˜ì´ì§€ê°€ ì¦‰ì‹œ ë¼ìš°íŒ…ëœë‹¤ëŠ” ì ì—ì„œëŠ” ë” ë‚˜ì€ ë¶€ë¶„ì´ ìˆì—ˆì§€ë§Œ, ì•„ë¬´ë˜ë„ ë’·ë°°ê²½ì´ ìƒë‹¹íˆ ë¶€ìì—°ìŠ¤ëŸ¬ì›Œì§„ë‹¤ëŠ” ì ì´ í° ë‹¨ì ì´ì—ˆë‹¤. ë’·ë°°ê²½ì„ ì™„ë²½íˆ í‰ë‚´ë‚¼ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ì—ˆë‹¤.

1ë²ˆ ë°©ë²•ì€ ë¼ìš°íŒ…ì´ ëŠ¦ê²Œ ì´ë¤„ì§€ê¸° ë•Œë¬¸ì— ì²˜ìŒì— í° í™”ë©´ ìƒíƒœë¡œ ë‚˜íƒ€ë‚œë‹¤ëŠ” ë‹¨ì ì´ ì¡´ì¬í–ˆì§€ë§Œ, ê·¸ë˜ë„ í›¨ì”¬ ìì—°ìŠ¤ëŸ¬ì›Œ ë³´ì˜€ë‹¤. ê·¸ë˜ì„œ 1ë²ˆ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í–ˆê³ , ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¬¼ì„ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤!

![](./hakpl/1-2.gif)

## Cookie? LocalStorage?

í•™êµì™€ í•™ê¸‰ ì„¤ì •ì„ ì–´ë””ì— ë³´ê´€í•´ì•¼ í• ê¹Œ? ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹­ë¶„ í™œìš©í•˜ë ¤ë©´ cookieê°€ ìœ ë¦¬í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë‹¤ë£¨ê¸°ì—” localStorageê°€ ìœ ë¦¬í•˜ë‹¤. ì²˜ìŒì—” ë‘ ì €ì¥ì†Œì— ëª¨ë‘ ìœ ì§€í–ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì—ì„  LocalStorage APIë¥¼ ì§ì ‘ ì‚¬ìš©í•œ ê±´ ì•„ë‹ˆê³  Zustand persistë¥¼ í†µí•´ êµ¬í˜„í–ˆë‹¤.

í•˜ì§€ë§Œ, ë‘ ì €ì¥ì†Œì— ê²¹ì¹˜ëŠ” ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ê²Œ ë§ì„ê¹Œ? í•˜ëŠ” ì˜ë¬¸ì´ ë“¤ì—ˆë‹¤. ê°œì¸ì ì¸ ìƒê°ìœ¼ë¡œ LocalStorageì— ìœ ì§€í•˜ëŠ” ê²Œ ë” ë§ëŠ” ê²ƒ ê°™ì•„ ë³´ì´ê¸´ í–ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ° ê²½ìš° ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ í™œìš©í•˜ëŠ” ê²Œ ì‚¬ì‹¤ìƒ ì–´ë ¤ì›Œì§„ë‹¤. ì• ì´ˆì— ìš”ì²­í•˜ëŠ” ë° í•™êµì™€ í•™ê¸‰ ì •ë³´ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì—, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì„œë²„ ì¸¡ì— ìš”ì²­í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. SSRì„ ì‹­ë¶„ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì„œë²„ ì¸¡ì—ì„œ í•™êµ ì •ë³´ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í–ˆë‹¤. cookieì— ì €ì¥í•˜ê±°ë‚˜, ì•„ë‹ˆë©´ search paramsìœ¼ë¡œ í¬í•¨í•˜ëŠ” ë°©ë²•ì´ ê°€ëŠ¥í•  ê²ƒì´ë‹¤.

### ë‹¤ë¥¸ ê³³ì—ì„  ì–´ë–»ê²Œ ì²˜ë¦¬í• ê¹Œ

ì˜¤ëœ ê³ ë¯¼ê³¼ í•¨ê»˜ ë‹¤ë¥¸ ê³³ë“¤ì€ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ì°¾ì•„ë³´ì•˜ë‹¤. SSRì„ ì–´ëŠ ì •ë„ í¬ê¸°í•˜ë©´ì„œ ë¡œì»¬ì—ë§Œ ì €ì¥í•˜ê³  AJAX ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ë” í”í•´ë³´ì´ê¸´ í–ˆë‹¤. í•˜ì§€ë§Œ ë™ì‹œì— Next.js 13 ì´í›„ì˜ App Routerë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì˜ ì˜ˆì œë‚˜ í”„ë¡œì íŠ¸ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì°¾ì•„ë³´ì•˜ì„ ë• cookieë¥¼ í™œìš©í•˜ëŠ” ê²½ìš°ê°€ ë” ì¦ì•˜ë‹¤. ì• ì´ˆì— í° ë°ì´í„°ëŠ” ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì¿ í‚¤ë¥¼ í™œìš©í•˜ëŠ” ê²Œ ë” í•©ë¦¬ì ì´ì§€ ì•Šì„ê¹Œ ì‹¶ê¸°ë„ í–ˆë‹¤.

ê·¸ë˜ë„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•™êµ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš°ê°€ ìˆëŠ”ë°, ì´ëŸ° ê²½ìš°ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ? ì´ ë¶€ë¶„ì— ëŒ€í•´ì„  NextAuthì™€ ê°™ì€ í”„ë¡œì íŠ¸ë¥¼ ë§ì´ ì°¸ê³ í–ˆë‹¤. ê°œëµì ìœ¼ë¡œ ì •ë¦¬í•´ë³´ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ì¿ í‚¤ì— ì €ì¥í•˜ê³  Context APIë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë“¤ì— ì „ë‹¬í•´ì£¼ëŠ” ë°©ì‹ì´ì—ˆë‹¤.

ë‚˜ë„ ê·¸ëŸ° ë°©ì‹ì„ ì±„íƒí•´ ì ìš©í•´ë³´ì•˜ê³ , ê½¤ë‚˜ ë§¤ë„ëŸ¬ì› ë‹¤ :)

### Cookieì— ì €ì¥í•˜ì!

ì•„ë˜ì™€ ê°™ì€ helper í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì¤¬ê³ ,

````tsx
export async function setSchoolSession(values: SchoolSession) {
  cookies().set("school", encodeURIComponent(`${values.regionCode}.${values.code}.${values.name}`), {
    httpOnly: true,
    path: "/",
  });
  cookies().delete("class");
}```

ì•„ë˜ì™€ ê°™ì€ context providerì™€ hookì„ ì‘ì„±í•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œë„ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.

```tsx
"use client";

// Context Provider

export function SchoolSessionProvider({
  children,
  schoolSession,
  classSession,
}) {
  const [schoolClient, setSchoolClient] = useState(schoolSession);
  const [classClient, setClassClient] = useState(classSession);

  useEffect(() => {
    setSchoolClient(schoolSession);
    setClassClient(classSession);
  }, [schoolSession, classSession]);

  return (
    <SchoolClassContext.Provider value={{ school: schoolClient, class: classClient }}>
      {children}
    </SchoolClassContext.Provider>
  );
}

// Hook

export function useSchoolSession() {
  const context = useContext(SchoolClassContext);
  if (!context) throw "Provider ì„¤ì •ë˜ì§€ ì•ŠìŒ";

  return context.school;
}
````
