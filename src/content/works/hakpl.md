---
title: 학플(Web)
icon: 🏫
start_date: 2024. 04.
stacks:
  - TypeScript

  - React

  - Next.js

  - Framer Motion
---

## 자연스러운 전환 효과 구현

이번 프로젝트의 주요 목표 중 하나가 바로 자연스러운 애니메이션 구현이었다. `framer-motion`을 활용해본 적은 있지만, 더 본격적으로 활용해보고 싶었다. 많은 영감을 준 것이 바로 [Emil Kowalski](https://emilkowal.ski) 님의 결과물들이었다.

먼저, Emil Kowalski 님의 [vaul](https://vaul.emilkowal.ski/) 라이브러리를 활용해보았다. 마치 모바일 네이티브 같은 드로어를 리액트 상에서 구현한 멋진 라이브러리다. 학교를 설정하는 부분에 적용하였는데, 다음과 같이 학교 설정을 위한 메뉴를 튀어나오도록 했다.

![](./hakpl/1-1.gif)

여기까진 그냥 라이브러리만 활용한 수준이었다. 문제는 그 다음이었다. 학교 설정을 위해 학교를 검색하고 선택할 수 있는 페이지로 자연스럽게 트랜지션이 발생했음 좋겠다는 생각에 이리저리 연구해보았다.

일단, 처음엔 framer motion에서 `layout` 애트리뷰트를 사용해 구현할 수 있을 거라 생각했다. 하지만 약간의 문제가 있었는데, 바로 라우팅이 일어나는 시점이었다.

드로어 창(모달)이 확대되며 다음 페이지로 연결되려면, 완전히 트랜지션이 끝날 때까지 뒷배경도 유지되어야 했다. 하지만 그냥 단순히 라우팅을 작동시키면 뒷배경은 바로 사라지게 되어 트랜지션이 상당히 부자연스러워진다.

그렇다면 어떻게 해결할 수 있을까? 나는 다음 두 가지의 가능성을 생각해보았다.

1. 기존 페이지에서 (가짜) 화면으로 확장한 뒤 라우팅을 요청한다.
2. 새로운 페이지에도 (가짜로) 뒷배경을 만들어준다.

두 가지를 모두 구현해보았고, 2번 방법의 경우 새로운 페이지가 즉시 라우팅된다는 점에서는 더 나은 부분이 있었지만, 아무래도 뒷배경이 상당히 부자연스러워진다는 점이 큰 단점이었다. 뒷배경을 완벽히 흉내낼 수 없기 때문이었다.

1번 방법은 라우팅이 늦게 이뤄지기 때문에 처음에 흰 화면 상태로 나타난다는 단점이 존재했지만, 그래도 훨씬 자연스러워 보였다. 그래서 1번 방법으로 구현했고, 아래와 같은 결과물을 얻을 수 있었다!

![](./hakpl/1-2.gif)

